(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"02db":function(t,e,n){var r=n("8c5e");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("4f06").default;a("d825defe",r,!0,{sourceMap:!1,shadowMode:!1})},"0747":function(t,e,n){t.exports=n.p+"static/img/UserImg.7ca3a56e.jpg"},"1c6f":function(t,e,n){"use strict";var r,a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"container"},[r("v-uni-view",{staticClass:"title"},[t._v("环境监测系统")]),r("v-uni-view",{staticClass:"panel"},[r("v-uni-view",{staticClass:"panel-header"},[r("v-uni-text",{staticClass:"panel-title"},[t._v("环境监测面板")]),r("v-uni-view",{staticClass:"status-container"},[r("v-uni-text",{staticClass:"status-label"},[t._v("Status:")]),t.alarmActive?r("v-uni-view",{staticClass:"status-alert"},[r("v-uni-text",{staticClass:"icon-text"},[t._v("⚠️")]),r("v-uni-text",[t._v("警告")])],1):r("v-uni-view",{staticClass:"status-normal"},[r("v-uni-view",{staticClass:"status-dot"}),r("v-uni-text",[t._v("正常")])],1)],1)],1),r("v-uni-view",{staticClass:"panel-content"},[r("v-uni-view",{staticClass:"tabs"},[r("v-uni-view",{staticClass:"tab-buttons"},t._l(t.tabs,(function(e,n){return r("v-uni-view",{key:n,class:["tab-button",t.activeTab===e.value?"tab-active":""],on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.switchTab(e.value)}}},[r("v-uni-text",{staticClass:"tab-text"},[t._v(t._s(e.label))])],1)})),1)],1),"sensors"===t.activeTab?r("v-uni-view",{staticClass:"tab-content"},[r("v-uni-view",{staticClass:"sensor-grid"},[r("v-uni-view",{staticClass:"weather-card",class:"00"===t.wp_code?"sunny":"cloudy"},[r("v-uni-view",{staticClass:"sensor-header"},[r("v-uni-text",{staticClass:"icon-text"},[t._v(t._s(t.weatherIcon))]),r("v-uni-text",{staticClass:"sensor-title"},[t._v("户外天气")])],1),r("v-uni-view",{staticClass:"weather-content"},[r("v-uni-text",{staticClass:"weather-temp"},[t._v(t._s(t.wea_temperature)+"°C")]),r("v-uni-text",{staticClass:"weather-desc"},[t._v(t._s(t.weatherDescription))])],1)],1),r("v-uni-view",{staticClass:"sensor-container"},[r("v-uni-view",{staticClass:"sensor-card sensor-left"},[r("v-uni-view",{staticClass:"sensor-header"},[r("v-uni-text",{staticClass:"icon-text temp-icon"},[t._v("🌡️")]),r("v-uni-text",{staticClass:"sensor-title"},[t._v("温度")])],1),r("v-uni-text",{staticClass:"sensor-value"},[t._v(t._s(t.temperature)+"°C")])],1),r("v-uni-view",{staticClass:"sensor-card sensor-right"},[r("v-uni-view",{staticClass:"sensor-header"},[r("v-uni-text",{staticClass:"icon-text humidity-icon"},[t._v("💧")]),r("v-uni-text",{staticClass:"sensor-title"},[t._v("湿度")])],1),r("v-uni-text",{staticClass:"sensor-value"},[t._v(t._s(t.humidity)+"%")])],1)],1),r("v-uni-view",{staticClass:"sensor-card"},[r("v-uni-view",{staticClass:"sensor-header"},[r("v-uni-text",{staticClass:"icon-text temp-icon"},[t._v("🔥")]),r("v-uni-text",{staticClass:"sensor-title"},[t._v("火灾预警")]),r("v-uni-text",{class:"fire-modify status-text "+t.fireStatus.cssClass},[t._v(t._s(t.fireStatus.status))])],1)],1)],1),r("v-uni-view",{staticClass:"sensor-card"},[r("v-uni-view",{staticClass:"sensor-header"},[r("v-uni-text",{staticClass:"icon-text gas-icon"},[t._v("⚠️")]),r("v-uni-text",{staticClass:"sensor-title"},[t._v("有害气体浓度 (CO/VOC)")])],1),r("v-uni-view",{staticClass:"sensor-status"},[r("v-uni-text",{staticClass:"sensor-value"},[t._v(t._s(t.gasLevel)+" ppm")]),r("v-uni-text",{class:"status-text "+t.gasStatus.cssClass},[t._v(t._s(t.gasStatus.status))])],1),r("v-uni-text",{staticClass:"sensor-accuracy"},[t._v("范围: 0-1000ppm")]),r("v-uni-view",{staticClass:"progress-bar"},[r("v-uni-view",{class:"progress-fill "+(t.gasLevel<400?"gas-safe":t.gasLevel<700?"gas-warning":"gas-danger"),style:{width:t.gasLevel/1e3*100+"%"}})],1)],1)],1):t._e(),"controls"===t.activeTab?r("v-uni-view",{staticClass:"tab-content"},[r("v-uni-view",{staticClass:"control-card"},[r("v-uni-view",{staticClass:"control-header"},[r("v-uni-text",{staticClass:"icon-text fan-icon"},[t._v("🌀")]),r("v-uni-text",{staticClass:"control-title"},[t._v("风扇控制")])],1),r("v-uni-view",{staticClass:"control-status"},[r("v-uni-text",[t._v("转速档位: "+t._s(t.fanSpeed))]),r("v-uni-text",{class:t.fanSpeed>0?"status-active":"status-inactive"},[t._v(t._s(t.fanSpeed>0?"Active":"Inactive"))])],1),r("v-uni-text",{staticClass:"control-range"},[t._v("范围: 0-3 档")]),r("v-uni-view",{staticClass:"control-header"},[r("v-uni-text",{staticClass:"icon-text",class:t.alarmMode>0?"alarm-on-icon":"alarm-off-icon"},[t._v(t._s(t.alarmMode>0?"🔊":"🔇"))]),r("v-uni-text",{staticClass:"control-title"},[t._v("蜂鸣器警报")])],1),r("v-uni-view",{staticClass:"control-status"},[r("v-uni-text",[t._v("模式: "+t._s(t.alarmModes[t.alarmMode]))]),r("v-uni-text",{class:t.alarmMode>0?"status-alarm":"status-inactive"},[t._v(t._s(t.alarmMode>0?"注意":"安静"))])],1),r("v-uni-slider",{staticClass:"slider",attrs:{value:t.fanSpeed,min:0,max:3,step:1,activeColor:"#3b82f6",backgroundColor:"#e5e7eb","block-size":"24","show-value":!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onFanSliderChange.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"preset-buttons"},t._l(t.fanPresets,(function(e,n){return r("v-uni-view",{key:n,staticClass:"preset-button",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.fanSpeed=e.value}}},[r("v-uni-text",[t._v(t._s(e.label))])],1)})),1),r("v-uni-view",{class:["test-button"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleTest.apply(void 0,arguments)}}},[r("v-uni-text",[t._v("测试")])],1)],1)],1):t._e(),"ai"===t.activeTab?r("v-uni-view",{staticClass:"tab-content"},[r("v-uni-view",{staticClass:"ai-header"},[r("v-uni-text",{staticClass:"icon-text ai-icon"},[t._v("🤖")]),r("v-uni-text",{staticClass:"ai-title"},[t._v("气象小笨蛋")]),t.isStreaming?r("v-uni-text",{staticClass:"stream-status"},[t._v("接收中...")]):t._e()],1),t.errorMessage?r("v-uni-view",{staticClass:"error-message"},[t._v(t._s(t.errorMessage))]):t._e(),r("v-uni-scroll-view",{staticClass:"ai-responses",attrs:{"scroll-y":!0,"scroll-into-view":"lastMsg","scroll-with-animation":!0}},[r("v-uni-text",{staticClass:"ai-text"},[t._v(t._s(t.reaContent)),t.isStreaming?r("v-uni-text",{staticClass:"typing-cursor"},[t._v("|")]):t._e()],1),r("v-uni-view",{attrs:{id:"lastMsg"}})],1),r("v-uni-view",{staticClass:"ai-reply"},[r("v-uni-text",{staticClass:"ai-text"},[t._v(t._s(t.replyContent))])],1),r("v-uni-view",{staticClass:"ai-questions"},[r("v-uni-button",{class:["record-button",t.isRecording?"recording":""],attrs:{title:"语音输入"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleRecording.apply(void 0,arguments)}}},[t._v(t._s(t.isRecording?"🛑":"🎙️"))]),r("v-uni-input",{attrs:{type:"text",placeholder:"请输入你的问题",disabled:t.isStreaming},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;arguments[0]=e=t.$handleEvent(e),t.handleChat.apply(void 0,arguments)}},model:{value:t.userMessage,callback:function(e){t.userMessage=e},expression:"userMessage"}}),r("v-uni-button",{class:{loading:t.isStreaming},attrs:{disabled:t.isStreaming||!t.userMessage.trim()},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChat.apply(void 0,arguments)}}},[t._v(t._s(t.isStreaming?"传输中...":"发送"))])],1)],1):t._e(),"display"===t.activeTab?r("v-uni-view",{staticClass:"tab-content"},[r("v-uni-view",{staticClass:"user-center-card"},[r("v-uni-view",{staticClass:"avatar-container"},[r("v-uni-image",{staticClass:"avatar",attrs:{src:n("0747"),mode:"aspectFill"}})],1),r("v-uni-view",{staticClass:"user-info"},[r("v-uni-text",{staticClass:"username"},[t._v(t._s(t.uname))])],1),r("v-uni-view",{staticClass:"function-list"},[r("v-uni-view",{staticClass:"list-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPasswordDialog=!0}}},[r("v-uni-text",{staticClass:"item-icon"},[t._v("🔒")]),r("v-uni-text",{staticClass:"item-text"},[t._v("修改密码")]),r("v-uni-text",{staticClass:"item-arrow"},[t._v("›")])],1),r("v-uni-view",{staticClass:"list-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showAbout.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"item-icon"},[t._v("ℹ️")]),r("v-uni-text",{staticClass:"item-text"},[t._v("关于我们")]),r("v-uni-text",{staticClass:"item-arrow"},[t._v("›")])],1),r("v-uni-view",{staticClass:"list-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleLogout.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"item-icon"},[t._v("🚪")]),r("v-uni-text",{staticClass:"item-text"},[t._v("退出登录")]),r("v-uni-text",{staticClass:"item-arrow"},[t._v("›")])],1)],1)],1)],1):t._e(),t.showPasswordDialog?r("v-uni-view",{staticClass:"password-dialog"},[r("v-uni-view",{staticClass:"dialog-content"},[r("v-uni-text",{staticClass:"dialog-title"},[t._v("修改密码")]),r("v-uni-input",{attrs:{type:"password",placeholder:"原密码"},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),r("v-uni-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),r("v-uni-input",{attrs:{type:"password",placeholder:"确认新密码"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),r("v-uni-view",{staticClass:"dialog-buttons"},[r("v-uni-button",{staticClass:"confirm-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChangePassword.apply(void 0,arguments)}}},[t._v("确认")]),r("v-uni-button",{staticClass:"cancel-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPasswordDialog=!1}}},[t._v("取消")])],1)],1)],1):t._e()],1)],1)],1)},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}))},"8c5e":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 语音输入按钮样式 */.record-button[data-v-ca0097f6]{background:#3b82f6;color:#fff;border-radius:50%;padding:8px;width:44px;height:44px;font-size:28px;-webkit-transition:all .3s;transition:all .3s;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;&.recording{background:#ef4444;-webkit-animation:pulse-data-v-ca0097f6 1s infinite;animation:pulse-data-v-ca0097f6 1s infinite}}@-webkit-keyframes pulse-data-v-ca0097f6{0%,\r\n  100%{opacity:1}50%{opacity:.5}}.ai-questions[data-v-ca0097f6]{gap:8px;uni-button{-webkit-flex-shrink:0;flex-shrink:0}}\r\n/* 新增样式 */.stream-status[data-v-ca0097f6]{font-size:12px;color:#3b82f6;margin-left:10px;-webkit-animation:pulse-data-v-ca0097f6 1s infinite;animation:pulse-data-v-ca0097f6 1s infinite}.error-message[data-v-ca0097f6]{color:#ef4444;padding:8px;border:1px solid #fecaca;border-radius:4px;margin:10px 0;background:#fef2f2}.typing-cursor[data-v-ca0097f6]{color:#3b82f6;-webkit-animation:blink-data-v-ca0097f6 1s step-end infinite;animation:blink-data-v-ca0097f6 1s step-end infinite}.loading[data-v-ca0097f6]{background:#94a3b8!important;cursor:not-allowed}@-webkit-keyframes blink-data-v-ca0097f6{50%{opacity:0}}@keyframes pulse-data-v-ca0097f6{0%,\r\n  100%{opacity:1}50%{opacity:.5}}.mobile-frame[data-v-ca0097f6]{position:relative;width:100%;padding-top:177.78%;\r\n  /* 9:16比例 (9/16=56.25%) */max-width:375px;\r\n  /* 移动端标准宽度 */margin:0 auto;\r\n  /* 水平居中 */overflow:hidden;box-shadow:0 0 20px rgba(0,0,0,.1);\r\n  /* 模拟手机边框 */border-radius:20px}.mobile-frame iframe[data-v-ca0097f6]{position:absolute;top:0;left:0;width:100%;height:100%;-webkit-transform-origin:top left;transform-origin:top left;-webkit-transform:scale(1);transform:scale(1)\r\n  /* 可调整缩放比例 */}\r\n/* Try Anime Styles */.typing-container[data-v-ca0097f6]{font-family:Courier New,monospace;margin:2rem auto;margin-bottom:1rem;position:relative;width:-webkit-fit-content;width:fit-content;max-width:100%}.typing-effect[data-v-ca0097f6]{\r\n  /* 修正动画参数与显示方式 */display:inline-block;font-size:16px;width:100%;white-space:nowrap;overflow:hidden;border-right:2px solid #3b82f6;-webkit-animation:typing-data-v-ca0097f6 3s steps(30) forwards,blink-caret-data-v-ca0097f6 .8s step-end infinite;animation:typing-data-v-ca0097f6 3s steps(30) forwards,blink-caret-data-v-ca0097f6 .8s step-end infinite}@-webkit-keyframes typing-data-v-ca0097f6{from{width:0}to{width:100%}\r\n\r\n  /* 保持最终状态可见 */}@keyframes typing-data-v-ca0097f6{from{width:0}to{width:100%}\r\n\r\n  /* 保持最终状态可见 */}@-webkit-keyframes blink-caret-data-v-ca0097f6{from,\r\n  to{border-color:transparent}50%{border-color:#2c3e50}}@keyframes blink-caret-data-v-ca0097f6{from,\r\n  to{border-color:transparent}50%{border-color:#2c3e50}}\r\n/* 增加移动端响应式适配 */@media (max-width:480px){.typing-effect[data-v-ca0097f6]{font-size:14px;-webkit-animation:typing-data-v-ca0097f6 2.5s steps(25) forwards,blink-caret-data-v-ca0097f6 .8s step-end infinite;animation:typing-data-v-ca0097f6 2.5s steps(25) forwards,blink-caret-data-v-ca0097f6 .8s step-end infinite}}\r\n/* General Styles */.container[data-v-ca0097f6]{padding:20px;max-width:768px;margin:0 auto;background-color:#f8fafc;min-height:100vh}.title[data-v-ca0097f6]{font-size:24px;font-weight:700;margin-bottom:20px;color:#1e293b;text-align:center}\r\n/* Panel Styles */.panel[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 10px 25px -5px rgba(0,0,0,.1);background-color:#fff;overflow:hidden}.panel-header[data-v-ca0097f6]{background-color:#1e40af;color:#fff;padding:20px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.panel-title[data-v-ca0097f6]{font-weight:600;font-size:18px}.panel-content[data-v-ca0097f6]{padding:20px}\r\n/* Status Styles */.status-container[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:hsla(0,0%,100%,.1);padding:6px 12px;border-radius:20px}.status-label[data-v-ca0097f6]{font-size:14px;margin-right:8px;opacity:.9}.status-alert[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fecaca}.status-normal[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#86efac}.status-dot[data-v-ca0097f6]{height:10px;width:10px;border-radius:50%;background-color:#4ade80;margin-right:6px;box-shadow:0 0 8px #4ade80}\r\n/* Tab Styles */.ai-card[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:12px;padding:20px;background-color:#fff;box-shadow:0 4px 6px -1px rgba(0,0,0,.05);-webkit-transition:box-shadow .2s ease,-webkit-transform .2s ease;transition:box-shadow .2s ease,-webkit-transform .2s ease;transition:transform .2s ease,box-shadow .2s ease;transition:transform .2s ease,box-shadow .2s ease,-webkit-transform .2s ease}.ai-title[data-v-ca0097f6]{font-weight:600;color:#334155;font-size:16px}.ai-questions[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;gap:10px}.ai-questions uni-input[data-v-ca0097f6]{padding:10px;\r\n  /* 增加内边距 */border-bottom:1px dashed #95a5a6;width:70%;-webkit-border-image:-webkit-linear-gradient(left,#3498db,#e74c3c);border-image:linear-gradient(90deg,#3498db,#e74c3c);border-image-slice:1;border-width:0 0 2px 0;-webkit-transition:all .3s;transition:all .3s}.ai-questions uni-input[data-v-ca0097f6]::-webkit-input-placeholder{color:#999;\r\n  /* 灰色占位符 */font-weight:300;\r\n  /* 细体 */font-size:14px\r\n  /* 适当字号 */}.ai-questions uni-input[data-v-ca0097f6]::placeholder{color:#999;\r\n  /* 灰色占位符 */font-weight:300;\r\n  /* 细体 */font-size:14px\r\n  /* 适当字号 */}\r\n/* 聚焦状态优化 */.ai-questions uni-input[data-v-ca0097f6]:focus::-webkit-input-placeholder{opacity:.6;\r\n  /* 聚焦时透明度变化 */-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.ai-questions uni-input[data-v-ca0097f6]:focus::placeholder{opacity:.6;\r\n  /* 聚焦时透明度变化 */-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.ai-questions uni-button[data-v-ca0097f6]{border-radius:22px;\r\n  /* 常规圆角 */padding:.3rem 1rem;font-size:.6rem;font-weight:700;white-space:nowrap;\r\n  /* 防止文字折行 */background:#3b82f6;color:#fff;cursor:pointer;-webkit-transition:background .3s ease;transition:background .3s ease}.ai-questions uni-button[data-v-ca0097f6]:active{background:#93c5fd;\r\n  /* 淡蓝色 */-webkit-transform:scale(.98);transform:scale(.98)\r\n  /* 按压效果 */}.ai-responses[data-v-ca0097f6]{width:90%;height:200px;padding:15px;background:#f8fafc;border-radius:8px;line-height:1.6;white-space:pre-wrap\r\n  /* 保留换行 */}.ai-text[data-v-ca0097f6]{font-size:14px;font-weight:300;\r\n  /* 细体 */color:#334155}.ai-reply[data-v-ca0097f6]{width:90%;padding:15px}.tabs[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:10px;margin-bottom:20px;overflow:hidden;box-shadow:0 2px 5px rgba(0,0,0,.05)}.tab-buttons[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;background-color:#f8fafc}.tab-button[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:12px 8px;text-align:center;position:relative;-webkit-transition:all .3s ease;transition:all .3s ease;border-bottom:3px solid transparent}.tab-text[data-v-ca0097f6]{font-weight:600;font-size:15px;color:#64748b}.tab-active[data-v-ca0097f6]{background-color:#fff;border-bottom:3px solid #3b82f6}.tab-active .tab-text[data-v-ca0097f6]{color:#3b82f6}.tab-content[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;gap:20px}\r\n/* Sensor Styles */.sensor-grid[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;gap:15px}@media (min-width:768px){.sensor-grid[data-v-ca0097f6]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.sensor-grid>.sensor-card[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1}}.sensor-card[data-v-ca0097f6],\r\n.weather-card[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:12px;padding:15px;background-color:#fff;box-shadow:0 4px 6px -1px rgba(0,0,0,.05);-webkit-transition:box-shadow .2s ease,-webkit-transform .2s ease;transition:box-shadow .2s ease,-webkit-transform .2s ease;transition:transform .2s ease,box-shadow .2s ease;transition:transform .2s ease,box-shadow .2s ease,-webkit-transform .2s ease}.weather-card[data-v-ca0097f6]{background:-webkit-linear-gradient(315deg,#f5f7fa,#c3cfe2);background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.weather-card.sunny[data-v-ca0097f6]{background:-webkit-linear-gradient(315deg,#e0f2fe,#bae6fd);background:linear-gradient(135deg,#e0f2fe,#bae6fd)}.weather-card.cloudy[data-v-ca0097f6]{background:-webkit-linear-gradient(315deg,#f5f7fa,#c3cfe2);background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.weather-content[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:10px}.weather-temp[data-v-ca0097f6]{font-size:38px;font-weight:700;color:#1e293b}.weather-desc[data-v-ca0097f6]{font-size:14px;color:#475569;margin-top:4px}.sensor-card[data-v-ca0097f6]:active{-webkit-transform:translateY(2px);transform:translateY(2px);box-shadow:0 2px 4px -1px rgba(0,0,0,.05)}.sensor-container[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n  /* 改为横向排列 */gap:15px;width:100%\r\n  /* 确保占满父容器 */}.sensor-left[data-v-ca0097f6],\r\n.sensor-right[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;min-width:0}.sensor-header[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:12px}.sensor-header-left[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;gap:8px}.sensor-status-container[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;gap:4px;margin-left:auto\r\n  /* 确保状态靠右对齐 */}.sensor-title[data-v-ca0097f6]{font-weight:600;color:#334155;font-size:16px}.sensor-value[data-v-ca0097f6]{font-size:25px;font-weight:800;color:#1e293b;margin-bottom:4px}.sensor-accuracy[data-v-ca0097f6]{font-size:12px;color:#94a3b8;margin-bottom:12px}.fire-modify[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;position:relative;left:53%}.sensor-status[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:right;-webkit-align-items:right;align-items:right}\r\n/* Progress Bar Styles */.progress-bar[data-v-ca0097f6]{height:10px;background-color:#f1f5f9;border-radius:9999px;margin-top:8px;overflow:hidden}.progress-fill[data-v-ca0097f6]{height:100%;border-radius:9999px;-webkit-transition:width .5s ease;transition:width .5s ease}.temp-gradient[data-v-ca0097f6]{background:-webkit-linear-gradient(left,#3b82f6,#ef4444);background:linear-gradient(90deg,#3b82f6,#ef4444)}.humidity-fill[data-v-ca0097f6]{background-color:#3b82f6}.gas-safe[data-v-ca0097f6]{background-color:#22c55e}.gas-warning[data-v-ca0097f6]{background-color:#eab308}.gas-danger[data-v-ca0097f6]{background-color:#ef4444}\r\n/* Control Styles */.control-card[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:12px;padding:20px;margin-bottom:20px;background-color:#fff;box-shadow:0 4px 6px -1px rgba(0,0,0,.05)}.control-header[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:1rem;margin-bottom:12px}.control-title[data-v-ca0097f6]{font-weight:600;color:#334155;font-size:16px}.control-status[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:8px;font-size:15px;color:#475569}.control-range[data-v-ca0097f6]{font-size:12px;color:#94a3b8;margin-bottom:12px}.slider[data-v-ca0097f6]{width:100%;margin:20px 0;height:40px}.preset-buttons[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:10px;margin-bottom:1.5rem}.preset-button[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:10px 12px;font-size:14px;border:1px solid #e2e8f0;border-radius:8px;background-color:#f8fafc;text-align:center;-webkit-transition:all .2s ease;transition:all .2s ease}.preset-button[data-v-ca0097f6]:active{background-color:#e2e8f0;-webkit-transform:translateY(1px);transform:translateY(1px)}.alarm-buttons[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:20px;gap:8px}.mode-button[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:10px 8px;font-size:14px;border:1px solid #e2e8f0;border-radius:8px;background-color:#f8fafc;text-align:center;-webkit-transition:all .2s ease;transition:all .2s ease}.mode-button[data-v-ca0097f6]:active{background-color:#e2e8f0;-webkit-transform:translateY(1px);transform:translateY(1px)}.mode-active[data-v-ca0097f6]{background-color:#1e40af;color:#fff;border:none}.test-button[data-v-ca0097f6]{width:90%;padding:12px;font-size:15px;border-radius:8px;border:1px solid #e2e8f0;background-color:#f8fafc;text-align:center;-webkit-transition:all .2s ease;transition:all .2s ease}.test-button[data-v-ca0097f6]:active{background-color:#e2e8f0;-webkit-transform:translateY(1px);transform:translateY(1px)}.alarm-active[data-v-ca0097f6]{background-color:#ef4444;color:#fff;border:none}\r\n/* Display Styles */.display-card[data-v-ca0097f6]{border:1px solid #e2e8f0;border-radius:12px;padding:20px;background-color:#fff;box-shadow:0 4px 6px -1px rgba(0,0,0,.05)}.display-header[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:12px}.display-title[data-v-ca0097f6]{font-weight:600;color:#334155;font-size:16px}.oled-display[data-v-ca0097f6]{background-color:#000;color:#4ade80;font-family:monospace;padding:20px;border-radius:10px;height:280px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;box-shadow:inset 0 0 10px rgba(0,255,0,.2),0 0 20px rgba(0,0,0,.2)}.oled-header[data-v-ca0097f6]{text-align:center;border-bottom:1px solid #22c55e;padding-bottom:8px;margin-bottom:12px;font-weight:700;letter-spacing:1px}.oled-grid[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:12px;gap:20px}.oled-column[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.oled-row[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:4px}.oled-progress[data-v-ca0097f6]{width:100%;background-color:#064e3b;height:4px;margin-top:4px;margin-bottom:12px;border-radius:2px;overflow:hidden}.oled-progress-fill[data-v-ca0097f6]{height:100%;background-color:#22c55e;-webkit-transition:width .5s ease;transition:width .5s ease}.oled-status[data-v-ca0097f6]{margin-top:12px;font-size:12px}.oled-footer[data-v-ca0097f6]{margin-top:auto;text-align:center;font-size:12px;border-top:1px solid #22c55e;padding-top:8px;letter-spacing:.5px}.oled-alert[data-v-ca0097f6]{color:#f87171;-webkit-animation:blink-data-v-ca0097f6 1s infinite;animation:blink-data-v-ca0097f6 1s infinite}@keyframes blink-data-v-ca0097f6{0%,\r\n  100%{opacity:1}50%{opacity:.5}}\r\n/* Icon Styles */.icon-text[data-v-ca0097f6]{font-size:20px;margin-right:10px}.temp-icon[data-v-ca0097f6]{color:#ef4444}.humidity-icon[data-v-ca0097f6]{color:#3b82f6}.gas-icon[data-v-ca0097f6]{color:#eab308}.fan-icon[data-v-ca0097f6]{color:#6b7280}.display-icon[data-v-ca0097f6]{color:#3b82f6}.alarm-on-icon[data-v-ca0097f6]{color:#ef4444}.alarm-off-icon[data-v-ca0097f6]{color:#6b7280}\r\n/* Status Text Colors */.status-text[data-v-ca0097f6]{font-weight:600}.status-safe[data-v-ca0097f6]{color:#22c55e}.status-normal[data-v-ca0097f6]{color:#3b82f6}.status-elevated[data-v-ca0097f6]{color:#eab308}.status-high[data-v-ca0097f6]{color:#f97316}.status-danger[data-v-ca0097f6]{color:#ef4444}.status-active[data-v-ca0097f6]{color:#22c55e;font-weight:600}.status-inactive[data-v-ca0097f6]{color:#94a3b8}.status-alarm[data-v-ca0097f6]{color:#ef4444;font-weight:600}.user-center-card[data-v-ca0097f6]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.avatar-container[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin:20px 0}.avatar[data-v-ca0097f6]{width:80px;height:80px;border-radius:50%;border:2px solid #3b82f6}.username[data-v-ca0097f6]{font-size:20px;font-weight:700;color:#1e293b;margin-bottom:15px;display:block;text-align:center}.function-list[data-v-ca0097f6]{margin-top:20px}.list-item[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:15px;border-bottom:1px solid #eee}.item-icon[data-v-ca0097f6]{font-size:20px;margin-right:10px}.item-text[data-v-ca0097f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:16px;color:#333}.item-arrow[data-v-ca0097f6]{font-size:24px;color:#999}\r\n/* 密码对话框样式 */.password-dialog[data-v-ca0097f6]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.dialog-content[data-v-ca0097f6]{background:#fff;padding:20px;border-radius:10px;width:80%}.dialog-title[data-v-ca0097f6]{font-size:18px;font-weight:700;margin-bottom:15px;display:block}.dialog-content uni-input[data-v-ca0097f6]{border:1px solid #ddd;padding:10px;margin-bottom:10px;border-radius:5px}.dialog-buttons[data-v-ca0097f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;margin-top:15px}.confirm-btn[data-v-ca0097f6]{background:#3b82f6;color:#fff;margin-left:10px;padding:8px 20px}.cancel-btn[data-v-ca0097f6]{background:#eee;color:#666;padding:8px 20px}",""]),t.exports=e},"96cf":function(t,e){!function(e){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l="object"===typeof t,d=e.regeneratorRuntime;if(d)l&&(t.exports=d);else{d=e.regeneratorRuntime=l?t.exports:{},d.wrap=m;var f="suspendedStart",u="suspendedYield",p="executing",b="completed",v={},x={};x[o]=function(){return this};var w=Object.getPrototypeOf,g=w&&w(w(P([])));g&&g!==r&&a.call(g,o)&&(x=g);var h=_.prototype=y.prototype=Object.create(x);C.prototype=h.constructor=_,_.constructor=C,_[c]=C.displayName="GeneratorFunction",d.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},d.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(h),t},d.awrap=function(t){return{__await:t}},S(T.prototype),T.prototype[s]=function(){return this},d.AsyncIterator=T,d.async=function(t,e,n,r){var a=new T(m(t,e,n,r));return d.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(h),h[c]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},d.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},d.values=P,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return s.type="throw",s.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function m(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),o=new M(r||[]);return i._invoke=E(t,n,o),i}function k(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function y(){}function C(){}function _(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function T(t){function e(n,r,i,o){var s=k(t[n],t,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"===typeof l&&a.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,o)}),(function(t){e("throw",t,i,o)})):Promise.resolve(l).then((function(t){c.value=t,i(c)}),(function(t){return e("throw",t,i,o)}))}o(s.arg)}var n;function r(t,r){function a(){return new Promise((function(n,a){e(t,r,n,a)}))}return n=n?n.then(a,a):a()}this._invoke=r}function E(t,e,n){var r=f;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===b){if("throw"===a)throw i;return z()}n.method=a,n.arg=i;while(1){var o=n.delegate;if(o){var s=j(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=k(t,e,n);if("normal"===c.type){if(r=n.done?b:u,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=b,n.method="throw",n.arg=c.arg)}}}function j(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=k(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){while(++r<t.length)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:z}}function z(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},c2a5:function(t,e,n){"use strict";var r=n("ee27");n("4de4"),n("7db0"),n("4160"),n("caad"),n("b680"),n("d3b7"),n("acd8"),n("e25e"),n("ac1f"),n("2532"),n("5319"),n("1276"),n("2ca0"),n("498a"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=r(n("c964")),i={data:function(){return{isRecording:!1,recognition:null,searchText:"",finalTranscript:"",interimTranscript:"",currentLang:"zh-CN",synth:window.speechSynthesis,voices:[],isSpeechSupported:"webkitSpeechRecognition"in window&&window.speechSynthesis,audioStream:null,mediaRecorder:null,audioChunks:[],tabs:[{label:"主页",value:"sensors"},{label:"设备管理",value:"controls"},{label:"气象AI",value:"ai"},{label:"我的",value:"display"}],activeTab:"sensors",wp_code:"00",weatherDescription:"晴",weatherIcon:"☀️",wea_temperature:"25",temperature:0,humidity:0,gasLevel:0,fanSpeed:0,alarmMode:0,alarmActive:!1,fire_level:0,fanPresets:[{label:"关闭",value:0},{label:"低档",value:1},{label:"中档",value:2},{label:"高档",value:3}],alarmModes:["Off","On"],baseUrl:"/api",chatHistory:[],replyContent:"",reaContent:"",isStreaming:!1,errorMessage:"",userMessage:"",showPasswordDialog:!1,oldPassword:"",newPassword:"",confirmPassword:"",showAboutDialog:!1}},computed:{gasStatus:function(){return this.gasLevel<800?{status:"Safe",cssClass:"status-safe"}:this.gasLevel<1e3?{status:"Normal",cssClass:"status-normal"}:this.gasLevel<1500?{status:"Elevated",cssClass:"status-elevated"}:{status:"Danger",cssClass:"status-danger"}},fireStatus:function(){return 1==this.fireLevel?{status:"Danger",cssClass:"status-danger"}:{status:"Safe",cssClass:"status-safe"}},uname:function(){return uni.getStorageSync("uname")||"未登录"}},methods:{toggleRecording:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isRecording){e.next=5;break}return e.next=3,t.stopRecording();case 3:e.next=7;break;case 5:return e.next=7,t.startRecording();case 7:case"end":return e.stop()}}),e)})))()},startRecording:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isSpeechSupported){e.next=3;break}return t.errorMessage="当前浏览器不支持语音识别功能",e.abrupt("return");case 3:return e.prev=3,n="#JSGF V1.0; grammar commands; public <command> = 温度 | 湿度 | 风速 | 降水 | 刷新 | 切换语言 ;",r=new(window.webkitSpeechGrammarList||window.SpeechGrammarList),r.addFromString(n,1),t.recognition=new webkitSpeechRecognition,t.recognition.grammars=r,t.recognition.continuous=!0,t.recognition.interimResults=!0,t.recognition.lang=t.currentLang,t.recognition.maxAlternatives=3,t.recognition.onstart=function(){t.isRecording=!0,t.finalTranscript="",t.interimTranscript=""},t.synth.onvoiceschanged=function(){t.voices=t.synth.getVoices()},t.switchLanguage=function(e){t.currentLang=e,t.recognition.lang=e,t.$forceUpdate()},t.recognition.onresult=function(e){var n=e.results[0][0].transcript;t.handleVoiceCommand(n);var r=new SpeechSynthesisUtterance("已执行 ".concat(n));r.voice=t.voices.find((function(e){return e.lang===t.currentLang})),t.synth.speak(r);for(var a=e.resultIndex;a<e.results.length;++a)e.results[a].isFinal?(t.finalTranscript+=e.results[a][0].transcript,t.userMessage=t.finalTranscript):(t.interimTranscript=e.results[a][0].transcript,t.userMessage=t.interimTranscript)},t.recognition.onerror=function(e){t.errorMessage="语音识别错误: ".concat(e.error),t.stopRecording()},t.recognition.start(),e.next=21,navigator.mediaDevices.getUserMedia({audio:!0});case 21:t.audioStream=e.sent,e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](3),t.errorMessage="麦克风访问失败: ".concat(e.t0.message),t.stopRecording();case 28:case"end":return e.stop()}}),e,null,[[3,24]])})))()},stopRecording:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.recognition&&(t.recognition.stop(),t.recognition=null),t.audioStream&&(t.audioStream.getTracks().forEach((function(t){return t.stop()})),t.audioStream=null),t.isRecording=!1,t.userMessage=t.finalTranscript;case 4:case"end":return e.stop()}}),e)})))()},switchTab:function(t){this.activeTab=t,console.log("Switched to tab:",t)},onFanSliderChange:function(t){this.fanSpeed=t.detail.value},handleTest:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.alarmMode=0===t.fanSpeed?0:1,e.prev=1,n=t.baseUrl+"/api/devices/control-devices",e.next=5,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({speed:t.fanSpeed})});case 5:if(r=e.sent,r.ok){e.next=8;break}throw new Error("HTTP error! status: ".concat(r.status));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.errorMessage="请求失败: ".concat(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},handleChat:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r,a,i,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.userMessage.trim()){e.next=4;break}return t.errorMessage="请输入有效问题",e.abrupt("return");case 4:return t.isStreaming=!0,t.replyContent="",t.reaContent="",e.next=9,fetch("http://154.39.79.242:8080/api/application/chat_message/65ebd480-19bc-11f0-8561-0242ac110002",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"application-4eda6827510e8707027d68489902b172",Accept:"application/json"},body:JSON.stringify({message:t.userMessage,stream:!0})});case 9:if(n=e.sent,n.ok){e.next=12;break}throw new Error("HTTP error! status: ".concat(n.status));case 12:r=n.body.getReader(),a=new TextDecoder;case 14:return e.next=17,r.read();case 17:if(i=e.sent,o=i.done,s=i.value,!o){e.next=22;break}return e.abrupt("break",26);case 22:c=a.decode(s).split("\n\n").filter((function(t){return t.startsWith("data: ")})),c.forEach((function(e){try{var n=e.replace("data: ",""),r=JSON.parse(n);r.reasoning_content&&(t.reaContent+=t.unicodeToChs(r.reasoning_content)),r.content&&(t.replyContent+=t.unicodeToChs(r.content)),"##HARDWARE_MODIFY_TO_0##"==t.replyContent?(t.fanSpeed=0,t.alarmMode=0,t.replyContent="已传输并执行指令",t.handleTest()):"##HARDWARE_MODIFY_TO_1##"==t.replyContent?(t.fanSpeed=1,t.alarmMode=1,t.replyContent="已传输并执行指令",t.handleTest()):"##HARDWARE_MODIFY_TO_2##"==t.replyContent?(t.fanSpeed=2,t.alarmMode=1,t.replyContent="已传输并执行指令",t.handleTest()):"##HARDWARE_MODIFY_TO_3##"==t.replyContent&&(t.fanSpeed=3,t.alarmMode=1,t.replyContent="已传输并执行指令",t.handleTest())}catch(a){console.warn("数据解析异常:",a)}})),e.next=14;break;case 26:t.userMessage="",e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](0),t.errorMessage="请求失败: ".concat(e.t0.message);case 32:return e.prev=32,t.isStreaming=!1,e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,29,32,35]])})))()},fetchSensorData:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.baseUrl+"/dataselect",e.prev=1,e.next=4,fetch(n,{headers:{Authorization:uni.getStorageSync("token")}});case 4:if(r=e.sent,r.ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(r.status));case 7:return e.next=9,r.json();case 9:a=e.sent,i=a[0]||{},t.temperature=parseFloat((i.temp||0).toFixed(1)),t.humidity=parseFloat((i.hum||0).toFixed(1)),t.gasLevel=parseFloat((i.gas||0).toFixed(1)),t.fanSpeed=i.fan_level||0,t.fireLevel=i.fire_state||0,t.alarmActive=1===i.final_stat,t.alarmMode=t.alarmActive?1:0,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),console.error("传感器数据获取失败:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))()},fetchWeatherData:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.open.geovisearth.com/v2/cn/area/basic?token=db2ed5ebf3c2e774be86874508811472&location=WTX_CH101040800");case 3:if(n=e.sent,n.ok){e.next=6;break}throw new Error("HTTP error! status: ".concat(n.status));case 6:return e.next=8,n.json();case 8:r=e.sent,t.weatherDescription=r.result.wp,t.wp_code=r.result.wp_code,t.wea_temperature=r.result.tem,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.error("天气数据获取失败:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},unicodeToChs:function(t){return t.replace(/\\u([\d\w]{4})/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))},handleVoiceCommand:function(t){var e=this;console.log("语音识别结果:",t),this.searchText=t,this.$nextTick((function(){console.log("当前输入框值:",e.searchText),e.handleSearch()}))},handleChangePassword:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.newPassword===t.confirmPassword){e.next=3;break}return uni.showToast({title:"新密码不一致",icon:"none"}),e.abrupt("return");case 3:return e.prev=3,n=t.baseUrl+"/user/password",e.next=7,fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:uni.getStorageSync("token")},body:JSON.stringify({uname:uni.getStorageSync("uname"),oldPassword:t.oldPassword.trim(),newPassword:t.newPassword.trim()})});case 7:return r=e.sent,e.next=10,r.json();case 10:if(a=e.sent,console.log("[DEBUG] 修改密码响应:",a),r.ok){e.next=14;break}throw new Error(a.msg||"请求失败: ".concat(r.status));case 14:if(403!==a.code){e.next=16;break}throw new Error(a.msg||"验证失败：请检查用户名和旧密码");case 16:if(203===a.code){e.next=18;break}throw new Error(a.msg||"未知错误");case 18:uni.showToast({title:"密码修改成功"}),uni.removeStorageSync("token"),uni.removeStorageSync("uname"),uni.reLaunch({url:"/pages/login/login"}),e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](3),console.error("[ERROR] 密码修改失败:",e.t0),uni.showToast({title:e.t0.message.includes("网络")?"服务器连接异常":e.t0.message,icon:"none"});case 28:case"end":return e.stop()}}),e,null,[[3,24]])})))()},showAbout:function(){uni.showModal({title:"关于我们",content:"环境监测气象站系统\n版本: 1.0.0\n开发团队: 气象监测组",showCancel:!1})},handleLogout:function(){uni.showModal({title:"提示",content:"确定要退出登录吗？",success:function(t){t.confirm&&uni.reLaunch({url:"/pages/login/login"})}})}},mounted:function(){var t=this;this.fetchWeatherData(),this.fetchSensorData(),this.timer=setInterval((function(){t.fetchSensorData()}),2e3)},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}};e.default=i},c68e:function(t,e,n){"use strict";var r=n("02db"),a=n.n(r);a.a},c964:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));n("d3b7"),n("e6cf");function r(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,c,"next",t)}function c(t){r(o,a,i,s,c,"throw",t)}s(void 0)}))}}},d5c6:function(t,e,n){"use strict";n.r(e);var r=n("c2a5"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},eddf:function(t,e,n){"use strict";n.r(e);var r=n("1c6f"),a=n("d5c6");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("c68e");var o,s=n("f0c5"),c=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,"ca0097f6",null,!1,r["a"],o);e["default"]=c.exports}}]);